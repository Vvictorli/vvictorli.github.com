---
layout: post
title: "[Java关键字]static关键字的使用"
date: 2020-07-17
tag: Java关键字


---



static可以用来修饰：属性、方法、代码块、内部类



## 使用static修饰属性：静态变量（或类变量）

#### 静态成员变量与非静态成员变量的区别

原来一个类里面的成员变量，每new一个对象，这个对象就有一份自己的成员变量，因为这些成员变量都不是静态成员变量。对于static

成员变量来说，这个成员变量只有一份，而且这一份是这个类所有的对象共享。

------

#### static修饰属性的其他说明

① 静态变量随着类的加载而加载。可以通过"类.静态变量"的方式进行调用

② 静态变量的加载要早于对象的创建

③ 由于类只会加载一次，则静态变量在内存中也只会存在一份：存在方法区的静态域中



## 使用static修饰方法：静态方法

① 随着类的加载而加载，可以通过"类.静态方法"的方式进行调用

② 静态方法中，只能调用静态的方法或属性；非静态方法中，既可以调用非静态的方法或属性，也可以调用静态的方法或属性



## 使用static修饰代码块：静态代码块

静态块也是static的重要应用之一。也是用于初始化一个类的时候做操作用的，和静态变量、静态方法一样，**静态块里面的代码只执行一次，且只在初始化类的时候执行**

```java
package com.heli.job;

/**
 * Author: Lihaonan
 * Date: 2020-07-17
 * Description:
 */
public class StaticDemo {
    static {
        System.out.println("aaaaa");
    }
}

class StaticDemo2{
    public static void main(String[] args) {
        System.out.println("xixi");
        new StaticDemo();
        System.out.println("haha");
        new StaticDemo();
        System.out.println("over");
    }
}
```

> xixi
> aaaaa
> haha
> over
>
> Process finished with exit code 0

## static注意点

在静态的方法内，不能使用this关键字、super关键字

#### 静态资源的引用问题

静态资源属于资源类，但是是独立于类存在的。从JVM的类加载机制的角度讲，静态资源是类初始化的时候加载的，而非静态资源是类

new的时候加载的。类的初始化早于类的new，比如Class.forName(“xxx”)方法，就是初始化了一个类，但是并没有new它，只是加载这

个类的静态资源罢了。所以对于静态资源来说，它是不可能知道一个类中有哪些非静态资源的；但是对于非静态资源来说就不一样了，由

于它是new出来之后产生的，因此属于类的这些东西它都能认识。所以：

① 静态方法能不能引用非静态资源？不能，new的时候才会产生的东西，对于初始化后就存在的静态资源来说，根本不认识它。

② 静态方法里面能不能引用静态资源？可以，因为都是类初始化的时候加载的，大家相互都认识。

③ 非静态方法里面能不能引用静态资源？可以，非静态方法就是实例方法，那是new之后才产生的，那么属于类的内容它都认识。



## 开发注意事项

#### 开发中，如何确定一个属性是否要声明为static的？

① 属性是可以被多个对象所共享的，不会随着对象的不同而不同的。

② 类中的常量也常常声明为static

------

#### 开发中，如何确定一个方法是否要声明为static的？

① 操作静态属性的方法，通常设置为static的

② 工具类中的方法，习惯上声明为static的。 比如：Math、Arrays、Collections

